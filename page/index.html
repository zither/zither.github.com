<!doctype html>
<html lang="zh-cn" class="no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta name="description" content="记录在生活以及自学编程过程中好玩的东西。">
	<meta name="keywords" content="MiniThinker, Programming, Computer, PHP, Scheme">
	<title>MiniThinker</title>
	
	<link rel="stylesheet" href="/theme/main.css">
</head>
<body>
	<div id="main">
		<div class="border">
			<header>
				<h1><a href="/">MiniThinker</a></h1>
				<h2>努力学习那些想要知道的东西</h2>
			</header>
			<div id="nav">
				<a href="/">Home</a>
				<a href="/about">About</a>
			</div>
			<div id="container"><div id="page">
		<article>
		<div class="title">
			<a href="/article/2014/03/13/feedparser">Feed 解析那些库</a>		</div>
		<div class="info">
			<span class="date">2014-03-13</span>
			-
			<span class="category">
				Category: <a href="/category/Programming">Programming</a>			</span>
			-
			<span class="tag">
				Tag: 
																<a href="/tag/PHP">PHP</a>			</span>
					</div>
		<div class="content">
			<p>前几天做了一个比较小的项目，大部分功能都涉及到 feed 解析。关于 feed 解析我之前也写过相关的代码，因为所需 feed 的情况都在自己的控制之内，当时使用的是自己写的一个解析类。这次项目要求要更加通用一些，所以在进行过程搜索了各种开源的 feed 解析库。</p>
<p>最先关注到的解析库是 SimplePie，它的功能比较齐全，基本上支持全格式的 feed 解析，还包括了转码缓存等功能。不过在解析中文订阅的时候会出现将中文编码为 HTML Entities 的问题。随手 google 了一下，发现有人已经遇到过相同的问题：<a href="http://blog.webfuns.net/archives/1710.html">SimplePie 将中文编码成 HTML Entities 的解决办法</a>。</p>
<p>文中已经说明出现这个问题的原因，并且给出了一个解决办法，不过修改方法不太清楚，这里详细说一下：</p>
<pre>
<code>// 修改的内容在 SimplePie_Sanitize 类的 sanitize 方法中
class SimplePie_Sanitieze
{
    // 忽略无关的内容
    // ...
    // ...

    public function sanitize($data, $type, $base = '')
    {
        // 忽略无关内容
        // ...
        // ...

        if ($type &amp; (SIMPLEPIE_CONSTRUCT_HTML | SIMPLEPIE_CONSTRUCT_XHTML))
        {
            $document = new DOMDocument();
            $document-&gt;encoding = 'UTF-8';

            // 增加一下两行代码
            $unique_tag = '#' . uniqid() . '#';
            $data = $unique_tag . $data . $unique_tag;

            $data = $this-&gt;preprocess($data, $type);
            // 继续忽略无关内容
            // ...
            // ...

            // 直接注释下面这两行代码
            //$real_body = $document-&gt;getElementsByTagName('body')-&gt;item(0)-&gt;childNodes-&gt;item(0);
            //$document-&gt;replaceChild($real_body, $document-&gt;firstChild);

            $data = trim($document-&gt;saveHTML());

            // 最后在添加下面这行代码
            list($_, $data, $_) = explode($unique_tag, $data);

            // ...
            // ...
        }
    }
}</code>
</pre>
<p>除了 SimplePie 之外还在 Github 上找到一个非常小的解析库：<a href="https://github.com/dzeban/FeedParser">FeedParser</a>。这个库的功能相比 SimplePie 要简陋太多，不过好在它足够简单，源代码看完想怎么改就怎么改。FeedParser 的作者也是因为自己需要而写的，最后更新在 3 年之前，提供的接口是使用 XPath 硬查询的，所以如果有特殊的需求需要自己修改代码。我自己使用的时候也添加过一些简单的接口，代码放在：</p>
<pre>
<code>// FeedParser Github repo
https://github.com/dzeban/FeedParser
// 我小小修改过的
https://github.com/zither/FeedParser</code>
</pre>
<p>总的来说，FeedParser 适合自己玩，正规一些的项目可以考虑使用 SimplePie。</p>		</div>
		<a class="more" href="/article/2014/03/13/feedparser">
			Read more
		</a>
	</article>
		<article>
		<div class="title">
			<a href="/article/2014/02/19/confusion-about-closure-in-slim">Slim 中关于 Closure 的问题</a>		</div>
		<div class="info">
			<span class="date">2014-02-19</span>
			-
			<span class="category">
				Category: <a href="/category/PHP">PHP</a>			</span>
			-
			<span class="tag">
				Tag: 
																<a href="/tag/Slim">Slim</a>			</span>
					</div>
		<div class="content">
			<p>在翻译 Slim 框架文档的依赖注入（Dependency Injection）部分时发现一个可能会让人迷惑的地方。Slim 框架的所有变量都储存在 \Slim\Helper\Set 类的实例中，我们可以像平常一样向 Slim 中注入需要的变量。但是在注入 Closure 或 lambda 时就会和想象中不太一样。这里直接使用用官方文档中的例子来说明：</p>
<p>		</div>
		<a class="more" href="/article/2014/02/19/confusion-about-closure-in-slim">
			Read more
		</a>
	</article>
		<article>
		<div class="title">
			<a href="/article/2014/02/17/what-is-a-programming-language">编程语言从哪里来</a>		</div>
		<div class="info">
			<span class="date">2014-02-17</span>
			-
			<span class="category">
				Category: <a href="/category/Programming">Programming</a>			</span>
			-
			<span class="tag">
				Tag: 
																<a href="/tag/Programming">Programming</a>			</span>
					</div>
		<div class="content">
			<p>我学习的第一门编程语言是 ASP，想做一个个人网站，后来陆续接触到 PHP、C、Python、Scheme 等语言。因为一直都是自学，所以在学习过程中心里总是有很多疑惑。其中最大的疑惑就是现在这么多编程语言到底是从哪里来的？也许有些可笑，编程语言当然都是人写的。各种语言书籍中都会提到语言的发展，比如学习 PHP 时他们会告诉你 PHP 是用 C 语言写的。最初的 C 语言又是由 B 语言开发的。这些发展过程好像有迹可循，所以我忽略了一些重要的东西。</p>
<p>		</div>
		<a class="more" href="/article/2014/02/17/what-is-a-programming-language">
			Read more
		</a>
	</article>
		<article>
		<div class="title">
			<a href="/article/2014/02/16/rebuild-blog">重新整理博客</a>		</div>
		<div class="info">
			<span class="date">2014-02-16</span>
			-
			<span class="category">
				Category: <a href="/category/Life">Life</a>			</span>
			-
			<span class="tag">
				Tag: 
																<a href="/tag/Note">Note</a>			</span>
					</div>
		<div class="content">
			<p>距离上次写博客已经是很久以前的事情了，因为放弃使用 Laravel 框架之后也就再也没有使用自己为 Laravel 框架写的静态博客插件。最近有一些学习上的东西想要记录一下，所以又切换到之前介绍过的 Pointless 静态博客程序。不过值得庆幸的是 Pointless 直到现在都还在更新维护，所以提交了一个半角双引号可能引起问题的 Issue。</p>
<p>		</div>
		<a class="more" href="/article/2014/02/16/rebuild-blog">
			Read more
		</a>
	</article>
		<div class="bar">
		<span class="new">
					</span>
		<span class="old">
					</span>
		<span class="count">
			1 / 1		</span>
	</div>
</div>
</div>
			<footer>Powerd By <a href="https://github.com/scarwu/Pointless">Pointless</a></footer>
		</div>
	</div>
	<!-- Define and Load Javascript -->
	<script src="/theme/main.js"></script>
	</body>
</html>
